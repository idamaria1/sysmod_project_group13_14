@using SysModelBank.Data.Enums

@model SysModelBank.Models.Identity.UserModel
@inject SysModelBank.Services.Settings.ICurrencyService _currencyService

<div class="container myContainer">
    <h1>User overview</h1>
    <div class="row">
        <div class="col-md-5 mt-3 mainParts firstPart">
            <p><b>Name: </b>@Model.Firstname @Model.Lastname</p>
            <p><b>Email: </b>@Model.Email</p>
            <p><b>Username: </b>@Model.Username</p>
            <p><b>Phone: </b>@Model.Phone</p>
            <p><b>Address: </b>@Model.Address</p>
            <p><b>Status: </b>@Model.Status</p>
            <a asp-action="Edit" class="btn btn-outline-light">Edit</a>
            @if (Model.Status == UserStatus.Active)
            {
                <form style="display: contents;" asp-controller="User" asp-action="RequestDelete">
                    <button type="submit" class="btn deleteButton">Delete</button>
                </form>
            }
            @if (Model.Status == UserStatus.PendingDeletion)
            {
                <form style="display: contents;" asp-controller="User" asp-action="CancelDelete">
                    <button type="submit" class="btn deleteButton">Cancel delete</button>
                </form>
            }
        </div>
            <div class="col-md-5 mt-3 offset-md-2 mainParts secondPart">
                <p><b>Default currency: </b>@Model.Currency.Name</p>
                <div class="dropdown">
                    <button class="btn btn-block btn-outline-light dropdown-toggle" type="button" id="dropdownMenuButton"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <b>Change currency</b>
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        @foreach (var currency in await _currencyService.GetAllAsync())
                        {
                            <form style="display: contents;" asp-controller="User" asp-action="SetCurrency">
                                @Html.Hidden("currencyId", currency.Id)
                                <button type="submit" class="dropdown-item">@currency.Name</button>
                            </form>
                        }
                        </div>
                </div>
            </div>
    </div>
</div>